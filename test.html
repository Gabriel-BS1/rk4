{{Frente}}
<div id=container>
  <div id=polygon></div>
  <div id=hidden-area></div>
</div>
<script>
var container = document.getElementById("container"),
    polygon = document.getElementById("polygon"),
    hiddenArea = document.getElementById("hidden-area"),
    containerWidth = 300,
    containerHeight = 200,
    polygonWidth = 100,
    polygonHeight = 100,
    polygonX = (containerWidth - polygonWidth) / 2,
    polygonY = (containerHeight - polygonHeight) / 2,
    polygonColor = "blue",
    polygonBorder = "2px solid black",
    polygonRadius = "0",
    polygonLines = 6,
    polygonAngle = 0,
    hiddenAreaColor = "red",
    hiddenAreaOpacity = .5,
    words = ["Anki", "HTML", "CSS", "JS", "Extens√£o"],
    phrase = "Eu gosto de {cloze:Anki}.",
    clozeNumber = 1,
    dragging = false;

function updatePolygonStyle() {
    polygon.style.width = polygonWidth + "px";
    polygon.style.height = polygonHeight + "px";
    polygon.style.left = polygonX + "px";
    polygon.style.top = polygonY + "px";
    polygon.style.backgroundColor = polygonColor;
    polygon.style.border = polygonBorder;
    polygon.style.borderRadius = polygonRadius;
    polygon.style.transform = "rotate(" + polygonAngle + "deg)";
}

function updateHiddenAreaStyle() {
    hiddenArea.style.backgroundColor = hiddenAreaColor;
    hiddenArea.style.opacity = hiddenAreaOpacity;
}

function updateHiddenAreaContent() {
    hiddenArea.innerHTML = "";
    for (var i = 0; i < words.length; i++) {
        var span = document.createElement("span");
        span.textContent = words[i];
        span.style.position = "absolute";
        var angle = polygonAngle + 360 * i / polygonLines,
            radius = polygonWidth / 2,
            centerY = polygonY + radius,
            centerX = polygonX + radius + Math.cos(angle * Math.PI / 180) * radius,
            posY = centerY + Math.sin(angle * Math.PI / 180) * radius;
        span.style.left = centerX + "px";
        span.style.top = posY + "px";
        hiddenArea.appendChild(span);
    }
}

function updatePhrase() {
    if (words.length > 0) {
        var index = Math.round(polygonAngle / (360 / polygonLines)) % polygonLines,
            word = words[index];
        phrase = phrase.replace("{cloze:" + word + "}", word);
        document.getElementById("question").textContent = phrase;
    }
}

function confirmClick() {
    if (words.length > 0) {
        var index = Math.round(polygonAngle / (360 / polygonLines)) % polygonLines;
        words[index];
        words.splice(index, 1);
        clozeNumber++;
        if (words.length > 0) {
            phrase = phrase + " {cloze:" + words[0] + "}.";
        }
        updateHiddenAreaContent();
    }
}

function handleMouseDown(event) {
    dragging = true;
    event.preventDefault();
}

function handleMouseMove(event) {
    if (dragging) {
        var mouseX = event.clientX - container.offsetLeft,
            mouseY = event.clientY - container.offsetTop,
            deltaX = mouseX - (polygonX + polygonWidth / 2),
            deltaY = mouseY - (polygonY + polygonHeight / 2),
            newPolygonX = polygonX + deltaX,
            newPolygonY = polygonY + deltaY;
        if (newPolygonX >= 0 && newPolygonX <= containerWidth - polygonWidth) {
            polygonX = newPolygonX;
        }
        if (newPolygonY >= 0 && newPolygonY <= containerHeight - polygonHeight) {
            polygonY = newPolygonY;
        }
        updatePolygonStyle();
        updateHiddenAreaContent();
    }
}

function handleMouseUp(event) {
    dragging = false;
    updatePhrase();
    confirmClick();
}

polygon.addEventListener("mousedown", handleMouseDown);
container.addEventListener("mousemove", handleMouseMove);
container.addEventListener("mouseup", handleMouseUp);
updatePolygonStyle();
updateHiddenAreaStyle();
updateHiddenAreaContent();
</script>
<style>
#container {
  position: relative;
  width: 300px;
  height: 200px;
  border: 1px solid #000;
  overflow: hidden;
}
#polygon {
  position: absolute;
  cursor: move;
}
#hidden-area {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}
#hidden-area span {
  font-weight: 700;
  color: #fff;
  font-size: 12px;
  pointer-events: none;
}
#question {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 16px;
}
</style>
<div id=question></div>
